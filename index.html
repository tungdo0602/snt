<!DOCTYPE html>
<html>
    <head>
        <title>Test</title>
        <meta charset="UTF-8">
        <meta name="description" content="Notification Test">
        <meta name="keywords" content="test.">
        <meta name="author" content="No one (...)">
    </head>
    <body>
        <script>
            window.onload = function(){
                var ttl = "Example Notification"
                var bd = "Example Body"
                var ics = ""
                var ca = 10000
                var curl = ""
                document.getElementById("ttl").addEventListener("input", function(e) {
                    ttl = this.value
                })
                document.getElementById("bd").addEventListener("input", function(e){
                    bd = this.value
                })
                document.getElementById("ics").addEventListener("input", function(e) {
                    ics = this.value
                })
                document.getElementById("ca").addEventListener("input", function(e){
                    ca = parseInt(this.value)
                })
                document.getElementById("curl").addEventListener("input", function(e){
                    curl = this.value
                    print(curl)
                })
                var showNotif = function(tl="Example Notification", b='Example Body', ics=null, ca=10000){
                    var notif = new Notification(tl, {
                        body: b,
                        icon: ics
                    })
                    setTimeout(()=>{
                        notif.close()
                    }, ca)
                    notif.addEventListener("click", function() {
                        window.open("https://www.youtube.com/watch?v=dQw4w9WgXcQ")
                    })
                 }
                 document.getElementById("button1").onclick = function(){
                     showNotif(ttl, bd, ics, ca)
                 };
                 document.getElementById("button2").onclick = async function(){
                    var grant = await Notification.requestPermission()
                    if (!document.getElementById("statusText")) {
                        var status = document.createElement("strong")
                        status.id = "statusText"
                    } else {
                        var status = document.getElementById("statusText")
                    }
                    if (grant === 'granted') {
                        status.style.color = "#22bb33"
                        status.innerText = "Granted!"
                    } else {
                        status.style.color = "#bb2124"
                        status.innerText = "Access Denied!"
                    }
                    if (!document.getElementById("statusText")) {
                        document.body.appendChild(status)
                    }
                }
                document.getElementById("button3").onclick = function(){
                    window.open(curl, "_blank").document.write("<html>" + document.documentElement.innerHTML + "</html>").focus();
                }
            }
        </script>
        <label>Title: </label>
        <input type="text" id="ttl">
        <label>Icon Source: </label>
        <input type="text" id="ics"><br><br>
        <label>Body: </label>
        <input type="text" id="bd">
        <label>Close After (ms): </label>
        <input type="text" id="ca"><br><br>
        <button id="button1">Show Notification</button><br><br>
        <button id="button2">Request Permission</button><br><br>
        <label>URL:  </label>
        <input type="text" id="curl"><br><br>
        <button id="button3">Change URL</button>
    </body>
</html>
